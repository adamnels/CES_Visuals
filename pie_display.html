<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!--    CDN for CSS styles  -->
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.css" rel="stylesheet">
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.css" rel="stylesheet">
        <!-- <link href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet" /> -->
        
        <!--    Page specific css style -->
        <link href="assets/css/pie_template.css" type="text/css" rel="stylesheet" />

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="../assets/js/html5shiv.js"></script>
        <![endif]-->

        <!--    Required Javascript libraries and scripts   -->
        <script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.js"></script>
        <!-- <script src="assets/lib/jquery-ui-1.10.3.js"></script>        -->
        <script src="assets/lib/d3.v3.min.js"></script>
        <script src="http://www.parsecdn.com/js/parse-1.2.16.min.js"></script>
        <script src="assets/lib/queue.v1.min.js"></script>
        <script src="assets/lib/topojson.v1.min.js"></script>
    </head>
    <body>
        <!--    Fixed-top navigation bar      -->
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="brand" href="#">Channel Labs</a>
                    <div class="nav-collapse collapse">
                        <ul class="nav"></ul>
                        <ul class="nav navbar-nav pull-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tim Sutcliffe <b class="caret"></b></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!--    Main container  -->
        <div class="container main-container">
            <div class="row-fluid">
                <div class="span12">
                    <p><strong>Campaigns</strong> > <strong>Bestbuy</strong></p>
                    <select name="date_selector" id="date_selector">
                        <option>Jan 15, 2013 - Feb 14, 2013</option>
                        <option>Feb 15, 2013 - Mar 14, 2013</option>
                        <option>Mar 15, 2013 - Apr 14, 2013</option>                        
                    </select>
                </div>

                <div class="row-fluid">
                    <div class="span6">
                        <h3>Overview by Numbers</h3>
                        <div class="row-fluid">
                            <div class="span6">
                                <div class="detail-background">
                                    <h2 class="text-center activeUserCount">00</h2>
                                    <p class="text-center"><strong>Active Users</strong></p>
                                </div>
                            </div>
                            <div class="span6">
                                <div class="detail-background loggedTaskDetail">
                                    <h2 class="text-center tasksLoggedCount">00</h2>
                                    <p class="text-center"><strong>Tasks Logged</strong></p>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span6">
                                <div class="detail-background">
                                    <h2 class="text-center tasksFixitNumber">00</h2>
                                    <p class="text-center"><strong>Fixits</strong><br/><strong>Submitted</strong></p>
                                </div>
                            </div>
                            <div class="span6">
                                <div class="detail-background">
                                    <h2 class="text-center">2h 34</h2>
                                    <p class="text-center"><strong>Average Age</strong></p>
                                </div>
                            </div>
                        </div>

                        <h3>Submitted Tasks</h3>
                        <div class="row-fluid">
                            <div class="span6">
                                <h4>By Department</h4>
                                <div class="department-map-container">
                                    <div class="department-map-container-hover-detail">
                                        <p class="taskName">&nbsp;</p>
                                        <p class="taskContribution">&nbsp;</p>
                                    </div>
                                </div>
                                <div class="department-map-container-legend"></div>
                            </div>
                            <div class="span6">
                                <h4>By Display</h4>
                                <div class="display-map-container">
                                    <div class="display-map-container-hover-detail">
                                        <p class="taskName">&nbsp;</p>
                                        <p class="taskContribution">&nbsp;</p>
                                    </div>                                    
                                </div>
                                <div class="display-map-container-legend"></div>
                            </div>
                        </div>

                        <h3>Trending Tasks</h3>
                        <div class="row-fluid">
                            <div class="span12">
                                <ul style="list-style: none;">
                                    <li><strong>Category</strong> Home Electronics</li>
                                    <li><strong>Display</strong> XBox 1</li>
                                    <li><strong>Region</strong> West Coast</li>
                                    <li><strong>Store</strong> Union Square 1531</li>
                                    <li><strong>Associate</strong> Bianca Moralee</li>
                                    <li><strong>RFT</strong> Jerry Lopez</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="span6">
                        <h3>Overview By Geography</h3>
                        <div class="inline-button-container">
                            <button name="button1" class="btn btn-default inline task-submission-button">Task submissions</button>
                            <button name="button2" class="btn btn-default inline">Exceptions</button>
                        </div>
                        <div class="density-map-container"></div>
                        
                        <div class="point-display-detail">
                            <h4>Display Details<button type="button" class="close close-point-detail" data-dismiss="modal" aria-hidden="true">&times;</button> </h4>
                            <br/>
                            <p class="point-address">&nbsp;</p>
                            <p class="point-title">&nbsp;</p>
                            <p class="point-subtitle">&nbsp;</p>
                            <div class="point-image">&nbsp;</div>
                        </div>
                        
                        <h3>Recently Reported</h3>
                        <div class="row-fluid">
                            <div class="span12">
                                <ul style="list-style: none;">
                                    <li><strong>2:36pm</strong> A Home Entertainment Heat Wall issue was reported in Sarasota, FL</li>
                                    <li><strong>2:34pm</strong> A Personal Electronics fixit task was closed in New York, NY</li>
                                    <li><strong>2:29pm</strong> A Digital Imaging fixit task was closed in Chicago, IL</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal to display the item drill down list  -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">Display Issues</h4>
                        <span>Click on an item for more details.</span>
                    </div>
                    <div class="modal-body">
                        <div id="informationListTable">
                            <table class="drill-down-data table table-bordered table-hover">
                                <thead>
                                    <tr class="width-100">
                                        <th class="width-20">Reported Date</th>
                                        <th class="width-30">Address</th>
                                        <th class="width-10">Retailer</th>
                                        <th class="width-20">Display</th>
                                        <th class="width-20">Email</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div id="detailInformation"></div>
                    </div>
                    <div class="modal-footer">
                        &nbsp;
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <!--    Page specific javascript    -->
        <script type="text/javascript" src="assets/js/pie_display.js"></script>
        <!--    Parse.js script to get current active user count    -->
        <script type="text/javascript">
            $(document).ready(function() {
                Parse.initialize("AzsDYAxpmHwyNLzw0aX0TJk4Hgrh1ziivPuyK4af", "JG9sgYs8GQ8pcCIbcUoUPPy6LLj4jkOCbwnDo4eI");

                var query = new Parse.Query('User');
                query.limit(1000);
                query.endsWith("email", "bestbuy.com")

                query.find({
                    success: function(results) {
                        var userCount = results.length;
                        $('.activeUserCount').html(userCount);
                    },
                    error: function(object, error) {
                        alert("error"); /* error is an instance of Parse.Error. */
                    }
                });
            });
        </script>
    </body>
</html>